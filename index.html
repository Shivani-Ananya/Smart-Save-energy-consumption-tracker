<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Smart‑Save Energy Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { background: #f0faff; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; }
    .navbar-brand { color: darkblue; font-weight: 700; font-size: 1.8rem; }
    .tracker-container { background: #fffbe6; padding: 25px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-top: 20px; }
    .side-box { background: #e7f5ff; border-radius: 10px; padding: 20px; margin-top: 20px; }
    footer { background: #61ace2; color: white; text-align: center; padding: 20px; margin-top: 30px; }
  </style>
</head>
<body>

<nav class="navbar navbar-expand-lg" style="background-color: #61ace2;">
  <div class="container-fluid">
    <a class="navbar-brand" href="#"><img src="./logo.jpg" width="40" height="40" alt="Logo"> Smart‑Save</a>
    <div class="ms-auto d-flex align-items-center">
      <label class="text-white me-2 mb-0">Location:</label>
      <select id="locationSelect" class="form-select w-auto me-3">
        <option value="tn">Tamil Nadu</option>
        <option value="mh">Maharashtra</option>
        <option value="dl">Delhi</option>
        <option value="dl">Andhra Pradhesh</option>
        <option value="dl">Mumbai</option>
        <option value="dl">Karnataka</option>
        <option value="dl">Kerla</option>
      </select>
      <a href="login.html" class="btn btn-outline-light">Login</a>
    </div>
  </div>
</nav>

<div class="container text-center mt-3">
  <img src="./images/save.jpg" class="img-fluid w-100" style="max-height:300px;object-fit:cover;" alt="Banner">
</div>

<div class="container-fluid mt-4">
  <div class="row">
    <div class="col-lg-3">
      <div class="side-box">
        <h5><i class="bi bi-bank"></i> Govt Schemes</h5>
        <p><img src="./images/ullaj.png" class="img-fluid mb-2" alt="UJALA LED"> UJALA LED Program</p>
        <p><img src="./images/pmkusum.png" class="img-fluid mb-2" alt="PM‑KUSUM"> PM‑KUSUM Solar Pumps</p>
        <p><img src="./images/home.png" class="img-fluid mb-2" alt="Efficient Home"> Efficient Appliance Scheme</p>
      </div>
    </div>

    <div class="col-lg-6 tracker-container mx-auto">
      <h2 class="text-center text-primary mb-4">Smart‑Save Energy Tracker</h2>
      <label class="fw-bold">Points: <span id="pointsDisplay">0</span>/10000</label>
      <div class="progress mb-3" style="height:30px;">
        <div id="energyProgress" class="progress-bar bg-success progress-bar-striped" role="progressbar" style="width:0%;"></div>
      </div>

      <div class="row text-center g-3 mb-3">
        <div class="col-6 col-md-4"><button class="btn btn-primary w-100" data-energy="200" data-appliance="Fan"><i class="bi bi-fan fs-2"></i><br>Fan</button></div>
        <div class="col-6 col-md-4"><button class="btn btn-warning w-100" data-energy="150" data-appliance="Light"><i class="bi bi-lightbulb fs-2"></i><br>Light</button></div>
        <div class="col-6 col-md-4"><button class="btn btn-success w-100" data-energy="300" data-appliance="Motor"><i class="bi bi-droplet-half fs-2"></i><br>Motor</button></div>
        <div class="col-6 col-md-4"><button class="btn btn-danger w-100" data-energy="400" data-appliance="Heater"><i class="bi bi-thermometer-high fs-2"></i><br>Heater</button></div>
        <div class="col-6 col-md-4"><button class="btn btn-info w-100" data-energy="350" data-appliance="Kitchen"><i class="bi bi-basket3 fs-2"></i><br>Kitchen</button></div>
        <div class="col-6 col-md-4"><button class="btn btn-secondary w-100" data-energy="250" data-appliance="AC"><i class="bi bi-snow fs-2"></i><br>AC</button></div>
      </div>

      <hr>
      <h5 class="text-center">Weekly Challenge: Save 1000 pts</h5>

      <!-- Chart canvas -->
      <canvas id="weeklyChart" height="150"></canvas>

      <!-- Weekly cost -->
      <div class="text-center mt-3">
        <h6 class="text-primary">Estimated Cost This Week:</h6>
        <p id="weeklyCost">₹0</p>
      </div>

      <!-- Tariff based on selection -->
      <div id="tariffExample" class="text-center mt-4">
        <h6 class="text-primary">TN Tariff Example:</h6>
        <p>200 units × ₹3.5 = ₹700/month</p>
      </div>
    </div>

    <div class="col-lg-3">
      <div class="side-box">
        <h5><i class="bi bi-lightbulb"></i> Did You Know?</h5>
        <ul>
          <li>LED bulbs save 80% energy</li>
          <li>Unplug idle chargers</li>
          <li>Use fans with AC</li>
          <li>Wash full loads only</li>
          <li>Turn off standby devices</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<footer>
  <img src="./logo.jpg" width="80" alt="Logo"><br>
  © 2025 Smart‑Save Initiative
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const totalPoints = 10000;
  let currentPoints = 0;
  const applianceUsage = {
    Fan: 0,
    Light: 0,
    Motor: 0,
    Heater: 0,
    Kitchen: 0,
    AC: 0
  };

  const tariffRates = { tn: 3.5, mh: 4.2, dl: 3.8 };
  let currentRate = tariffRates['tn'];

  const ctx = document.getElementById('weeklyChart').getContext('2d');
  const weeklyChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: Object.keys(applianceUsage),
      datasets: [{
        label: 'Energy Used (points)',
        data: Object.values(applianceUsage),
        backgroundColor: '#61ace2'
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: { beginAtZero: true }
      }
    }
  });

  document.querySelectorAll('[data-energy]').forEach(btn => {
    btn.onclick = () => {
      const pts = parseInt(btn.dataset.energy);
      const appliance = btn.dataset.appliance;

      currentPoints = Math.min(totalPoints, currentPoints + pts);
      document.getElementById('pointsDisplay').textContent = currentPoints;
      document.getElementById('energyProgress').style.width = (currentPoints / totalPoints * 100) + '%';

      // Update chart
      applianceUsage[appliance] += pts;
      weeklyChart.data.datasets[0].data = Object.values(applianceUsage);
      weeklyChart.update();

      // Update weekly cost
      const totalUnits = currentPoints / 50; // Assume 1 unit = 50 pts
      const cost = totalUnits * currentRate;
      document.getElementById('weeklyCost').textContent = '₹' + cost.toFixed(2);
    };
  });

  document.getElementById('locationSelect').onchange = (e) => {
    const val = e.target.value;
    currentRate = tariffRates[val];

    const examples = {
      tn: '<h6 class="text-primary">TN Tariff Example:</h6><p>200 units × ₹3.5 = ₹700/month</p>',
      mh: '<h6 class="text-primary">MH Tariff Example:</h6><p>200 units × ₹4.2 = ₹840/month</p>',
      dl: '<h6 class="text-primary">Delhi Tariff Example:</h6><p>200 units × ₹3.8 = ₹760/month</p>'
    };
    document.getElementById('tariffExample').innerHTML = examples[val];

    // Recalculate cost
    const totalUnits = currentPoints / 50;
    const cost = totalUnits * currentRate;
    document.getElementById('weeklyCost').textContent = '₹' + cost.toFixed(2);
  };
</script>
</body>
</html>